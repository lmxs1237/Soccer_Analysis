games[1,]
games[1,3]
games[1,3] > games[1,4]
games[3,3] > games[3,4]
games[4,3] > games[4,4]
games <- games %>%
mutate(win = ifelse(home_team_goal > away_team_goal, 1, 0))
games <- matches %>%
select(season, home_team_api_id,home_team_goal,away_team_goal) %>%
mutate(win = ifelse(home_team_goal > away_team_goal, 1, 0))
?left_join
games <- left_join(games, teams, by = c("home_team_api_id" = "team_api_id"))
View(games)
games <- left_join(games, select(teams,team_api_id, team_long_name, team_short_name), by = c("home_team_api_id" = "team_api_id"))
View(games)
games <- matches %>%
select(season, home_team_api_id,home_team_goal,away_team_goal) %>%
mutate(win = ifelse(home_team_goal > away_team_goal, 1, 0))
games <- left_join(games, select(teams,team_api_id, team_long_name, team_short_name), by = c("home_team_api_id" = "team_api_id"))
View(games)
games1 <- games %>%
group_by(home_team_api_id, win) %>%
count()
View(games1)
games <- matches %>%
select(season, home_team_api_id,home_team_goal,away_team_goal) %>%
mutate(win = ifelse(home_team_goal > away_team_goal, 1, 0))
games1 <- games %>%
group_by(home_team_api_id, win) %>%
count()
View(games1)
games <- games %>%
group_by(home_team_api_id, win) %>%
count()
View(games)
games1 <- left_join(games, select(teams,team_api_id, team_long_name, team_short_name), by = c("home_team_api_id" = "team_api_id"))
View(games1)
games <- matches %>%
select(season, home_team_api_id,home_team_goal,away_team_goal) %>%
mutate(win = ifelse(home_team_goal > away_team_goal, 'win', 'lose'))
games <- games %>%
group_by(home_team_api_id, win) %>%
count()
# win percentage of every team
games1 <- left_join(games, select(teams,team_api_id, team_long_name, team_short_name), by = c("home_team_api_id" = "team_api_id"))
library(tidyverse)
games1 <- games1 %>%
spread(., win, n)
View(games1)
# win percentage of every team
games1 <- left_join(games, select(teams,team_api_id, team_long_name, team_short_name), by = c("home_team_api_id" = "team_api_id"))
library(tidyverse)
games1 <- games1 %>%
spread(win, n) %>%
mutate(total_game = lose + win) %>%
mutate(win_pctg = win / total_game)
games <- matches %>%
select(season, home_team_api_id,home_team_goal,away_team_goal) %>%
mutate(win = ifelse(home_team_goal > away_team_goal, 'win', 'lose'))
games <- games %>%
group_by(season, home_team_api_id, win) %>%
count()
View(games)
# win percentage of every team
games1 <- left_join(games, select(teams,team_api_id, team_long_name, team_short_name), by = c("home_team_api_id" = "team_api_id"))
library(tidyverse)
games1 <- games1 %>%
spread(win, n) %>%
mutate(total_game = lose + win) %>%
mutate(win_pctg = win / total_game)
runApp()
write.csv(games1, './data/q1.csv')
runApp()
View(q1)
runApp()
runApp()
runApp()
runApp()
runApp()
library(glyphicon)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
flights <- fread("../deployment/shiny_db_demo/shiny_csv/flights14.csv")
library(shiny)
library(data.table)
library(dplyr)
library(tidyr)
library(ggplot2)
flights <- fread("../deployment/shiny_db_demo/shiny_csv/flights14.csv")
View(flights)
runApp('~/Desktop/NYCDSA/R/5 R shiny/deployment/shiny_db_demo/shiny_csv')
runApp('~/Desktop/NYCDSA/R/5 R shiny/deployment/shiny_db_demo/shiny_csv')
runApp('~/Desktop/NYCDSA/R/5 R shiny/deployment/shiny_db_demo/shiny_csv')
setwd("~/Desktop/NYCDSA/R/5 R shiny/deployment/shiny_db_demo/shiny_csv")
runApp()
runApp()
runApp('~/Desktop/NYCDSA/R/5 R shiny/Soccer_Analysis')
t <- game1 %>% separate(col = season, sep = '/')
t <- games1 %>% separate(col = season, sep = '/')
t <- games1 %>% separate(col = season, sep = '/', into = c('start','end'))
View(t)
write.csv(games1, './data/q1.csv')
setwd("~/Desktop/NYCDSA/R/5 R shiny/Soccer_Analysis")
write.csv(games1, './data/q1.csv')
games1 <- games1 %>% separate(col = season, sep = '/', into = c('start','end'))
write.csv(games1, './data/q1.csv')
View(games1)
unique(games1$team_short_name)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
games %>%
filter(team_short_name == 'ACA', start %in% 2010:2017)
games1 %>%
filter(team_short_name == 'ACA', start %in% 2010:2017)
library(ploty)
library(plotly)
games1 <- games1 %>%
separate(col = season, sep = '/', into = c('start','end'),remove = False)
games <- matches %>%
select(season, home_team_api_id,home_team_goal,away_team_goal) %>%
mutate(win = ifelse(home_team_goal > away_team_goal, 'win', 'lose'))
games <- games %>%
group_by(season, home_team_api_id, win) %>%
count()
# win percentage of every team
games1 <- left_join(games, select(teams,team_api_id, team_long_name, team_short_name), by = c("home_team_api_id" = "team_api_id"))
library(tidyverse)
games1 <- games1 %>%
spread(win, n) %>%
mutate(total_game = lose + win) %>%
mutate(win_pctg = win / total_game)
games1 <- games1 %>%
separate(col = season, sep = '/', into = c('start','end'),remove = False)
games1 <- games1 %>%
separate(col = season, sep = '/', into = c('start','end'),remove = FALSE)
write.csv(games1, './data/q1.csv')
library(plotly)
games1 %>%
filter(team_short_name == 'ACA', start %in% 2010:2017) %>%
ggplot2::ggplot(x = season, y = win_pctg) +
geom_line()
games1 %>%
filter(team_short_name == 'ACA', start %in% 2010:2017) %>%
ggplot2::ggplot() +
geom_line(x = season, y = win_pctg)
games1 %>%
filter(team_short_name == 'ACA', start %in% 2010:2017) %>%
ggplot2::ggplot(., aes(x = season, y = win_pctg)) +
geom_line()
games1 %>%
filter(team_short_name == 'ACA', start %in% 2010:2017) %>%
ggplot2::ggplot(., aes(x = season, y = win_pctg)) +
geom_line(linetype="dotted")
games1 %>%
filter(team_short_name == 'ACA', start %in% 2010:2017) %>%
ggplot2::ggplot(., aes(x = season, y = win_pctg)) +
geom_point()
games1 %>%
filter(team_short_name == 'ACA', start %in% 2010:2017) %>%
ggplot2::ggplot(., aes(x = season, y = win_pctg)) +
geom_path()
games1 %>%
filter(team_short_name == 'ACA', start %in% 2010:2017) %>%
ggplot2::ggplot(., aes(x = season, y = win_pctg)) +
geom_line() + geom_point(size=4, shape=20)
no
games1 %>%
filter(team_short_name == 'ACA', start %in% 2010:2017) %>%
ggplot2::ggplot(., aes(x = season, y = win_pctg)) +
geom_line() + geom_point(size=2, shape=20)
games1 %>%
filter(team_short_name == 'ACA', start %in% 2010:2017) %>%
ggplot2::ggplot(., aes(x = start, y = win_pctg)) +
geom_line() + geom_point(size=2, shape=20)
games1 %>%
filter(team_short_name == 'ACA', start %in% 2010:2017) %>%
ggplot2::ggplot(., aes(x = start, y = win_pctg), group = 1) +
geom_line() + geom_point(size=2, shape=20)
games1 %>%
filter(team_short_name == 'ACA', start %in% 2010:2017) %>%
ggplot2::ggplot(., aes(x = start, y = win_pctg)) +
geom_line(group = 1) + geom_point(size=2, shape=20)
games1 %>%
filter(team_short_name == 'ACA', start %in% 2010:2017) %>%
ggplotly(ggplot2::ggplot(., aes(x = start, y = win_pctg)) +
geom_line(group = 1) + geom_point(size=2, shape=20))
games1 %>%
filter(team_short_name == 'ACA', start %in% 2010:2017) %>%
ggplot2::ggplot(., aes(x = start, y = win_pctg)) +
geom_line(group = 1) + geom_point(size=2, shape=20)
g <- games1 %>%
filter(team_short_name == 'ACA', start %in% 2010:2017) %>%
ggplot2::ggplot(., aes(x = start, y = win_pctg)) +
geom_line(group = 1) + geom_point(size=2, shape=20)
#ggplotly(ggplot2::ggplot(x = season, y = win_pctg))
g
#ggplotly(ggplot2::ggplot(x = season, y = win_pctg))
ggplot(g)
#ggplotly(ggplot2::ggplot(x = season, y = win_pctg))
ggplotly(g)
g <- games1 %>%
filter(team_short_name == 'ACA', start %in% 2010:2017) %>%
ggplot2::ggplot(., aes(x = season, y = win_pctg)) +
geom_line(group = 1) + geom_point(size=2, shape=20)
#ggplotly(ggplot2::ggplot(x = season, y = win_pctg))
ggplotly(g)
runApp()
runApp()
runApp()
#ggplotly(ggplot2::ggplot(x = season, y = win_pctg))
ggplotly(g)
games1 %>%
filter(team_short_name == 'ACA', start %in% 2010:2017) %>%
ggplot2::ggplot(., aes(x = season, y = win_pctg)) +
geom_line(group = 1) + geom_point(size=2, shape=20) %>%
ggplotly()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp('~/Desktop/NYCDSA/R/5 R shiny/deployment/shiny_db_demo/shiny_csv')
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
View(q1)
View(lat_long)
View(countries)
View(leagues)
View(teams)
leagues <- left_join(leagues, countries, by = c("id","id"))
View(leagues)
leagues <- read.csv('./data/leagues.csv', row.names = 1)
leagues <- leagues %>%
left_join(., countries, by = c("id","id")) %>%
rename(name.x = name_league, name.y = name_country)
leagues <- leagues %>%
left_join(., countries, by = c("id","id")) %>%
rename('name.x' = 'name_league', 'name.y' = 'name_country')
leagues <- leagues %>%
left_join(., countries, by = c("id","id")) %>%
rename(name.x = 'name_league', name.y = 'name_country')
leagues <- leagues %>%
left_join(., countries, by = c("id","id")) %>%
rename(name.x = name_league, name.y = name_country)
leagues <- leagues %>%
left_join(., countries, by = c("id","id"))
leagues <- rename(leagues, name.x = name_league, name.y = name_country)
leagues <- read.csv('./data/leagues.csv', row.names = 1)
leagues <- leagues %>%
left_join(., countries, by = c("id","id")) %>%
rename(., name_league = name.x, name_country = name.y)
leagues <- read.csv('./data/leagues.csv', row.names = 1)
leagues <- leagues %>%
left_join(., countries, by = c("id" = "id")) %>%
rename(., name_league = name.x, name_country = name.y) %>%
left_join(., select(lat_long, latitude, longitude, name), c("name_country" = "name"))
View(t)
rm(t)
View(g)
rm(g)
teams <- read.csv('./data/teams.csv', row.names = 1)
teams <- read.csv('./data/teams.csv', row.names = 1)
runApp()
View(matches)
View(games)
View(games1)
View(teams)
games2 <- games1 %>%
left_join(., select(teams, team_short_name, country))
View(games2)
games2 <- games1 %>%
left_join(., select(teams, team_short_name, country), by = "team_short_name")
games1 <- games1 %>%
separate(col = season, sep = '/', into = c('start','end'),remove = FALSE) %>%
left_join(., select(teams, team_short_name, country), by = "team_short_name")
write.csv(games1, './data/q1.csv')
q1 <- read.csv('./data/q1.csv', row.names = 1)
View(q1)
rm(games2)
games1 %>%
filter(start %in% 2010:2017, team_short_name == 'ACA')
View(player)
View(player)
View(matches)
unique(matches$season)
setwd("~/Desktop/NYCDSA/R/5 R shiny/Soccer_Analysis")
values <- read.csv('./data/values.csv', row.names = 1)
View(values)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
countries <- read.csv('./data/countries.csv', row.names = 1)
lat_long <- read.csv('./data/lat_long.csv', row.names = 1)
leagues <- read.csv('./data/leagues.csv', row.names = 1)
matches <- read.csv('./data/matches.csv', row.names = 1)
player_attributes <- read.csv('./data/player_attributes.csv', row.names = 1)
player <- read.csv('./data/player.csv', row.names = 1)
sequence <- read.csv('./data/sequence.csv', row.names = 1)
team_attributes <- read.csv('./data/team_attributes.csv', row.names = 1)
teams <- read.csv('./data/teams.csv', row.names = 1)
values <- read.csv('./data/values.csv', row.names = 1)
# p1
library(dplyr)
games <- matches %>%
select(season, home_team_api_id,home_team_goal,away_team_goal) %>%
mutate(win = ifelse(home_team_goal > away_team_goal, 'win', 'lose'))
games <- games %>%
group_by(season, home_team_api_id, win) %>%
count()
# win percentage of every team
games1 <- left_join(games, select(teams,team_api_id, team_long_name, team_short_name), by = c("home_team_api_id" = "team_api_id"))
library(tidyverse)
games1 <- games1 %>%
spread(win, n) %>%
mutate(total_game = lose + win) %>%
mutate(win_pctg = win / total_game)
games1 <- games1 %>%
separate(col = season, sep = '/', into = c('start','end'),remove = FALSE) %>%
left_join(., select(teams, team_short_name, country), by = "team_short_name")
View(games1)
q1 <- read.csv('./data/q1.csv', row.names = 1)
View(q1)
shiny::runApp()
runApp()
games1 %>%
filter(start %in% 2010:2017, country = "Poland", team_short_name in c('CHO','BIA','POZ'))
(start %in% 2010:2017, country = "Poland", team_short_name %in% c('CHO','BIA','POZ'))
games1 %>%
filter(team_short_name == 'ACA' | start %in% 2010:2017) %>%
ggplot2::ggplot(., aes(x = season, y = win_pctg)) +
geom_line(group = 1) + geom_point(size=2, shape=20)
games1 %>%
filter(team_short_name == 'ACA' & start %in% 2010:2017) %>%
ggplot2::ggplot(., aes(x = season, y = win_pctg)) +
geom_line(group = 1) + geom_point(size=2, shape=20)
games1 %>%
filter(start %in% 2010:2017 | country = "Poland" | team_short_name %in% c('CHO','BIA','POZ'))
games1 %>%
filter(start %in% 2010:2017 | country == "Poland" | team_short_name %in% c('CHO','BIA','POZ'))
games1 %>%
filter(start %in% 2010:2017 & country == "Poland" & team_short_name %in% c('CHO','BIA','POZ'))
games1 %>%
filter(start %in% 2010:2017 & country == "Poland" & team_short_name %in% c('CHO','BIA','POZ')) %>%
ggplot(., aes(x = season, y = win_pctg)) +
geom_line(group = 1, aes(color = team_short_name)) +
geom_point(size=2, shape=20)
games1 %>%
filter(start %in% 2010:2017 & country == "Poland" & team_short_name %in% c('CHO','BIA','POZ')) %>%
ggplot(., aes(x = season, y = win_pctg)) +
geom_line(aes(color = team_short_name)) +
geom_point(size=2, shape=20)
games1 %>%
filter(start %in% 2010:2017 & country == "Poland" & team_short_name %in% c('CHO','BIA','POZ')) %>%
ggplot(., aes(x = season, y = win_pctg)) +
geom_line(group = 1, aes(color = team_short_name)) +
geom_point(size=2, shape=20)
games1 %>%
filter(start %in% 2010:2017 & country == "Poland" & team_short_name %in% c('CHO')) %>%
ggplot(., aes(x = season, y = win_pctg)) +
geom_line(group = 1, aes(color = team_short_name)) +
geom_point(size=2, shape=20)
games1 %>%
filter(start %in% 2010:2017 & country == "Poland" & team_short_name %in% c('CHO','BIA')) %>%
ggplot(., aes(x = season, y = win_pctg)) +
geom_line(group = 1, aes(color = team_short_name)) +
geom_point(size=2, shape=20)
games1 %>%
filter(start %in% 2010:2017 & country == "Poland" & team_short_name %in% c('CHO','BIA')) %>%
ggplot(., aes(x = season, y = win_pctg)) +
geom_line(group = 1, aes(color = team_short_name)) +
geom_point(size=2, shape=20, aes(color = team_short_name))
games1 %>%
filter(start %in% 2010:2017 & country == "Poland" & team_short_name %in% c('CHO','BIA')) %>%
ggplot(., aes(x = season, y = win_pctg)) +
#geom_line(group = 1, aes(color = team_short_name)) +
geom_point(size=2, shape=20, aes(color = team_short_name))
games1 %>%
filter(start %in% 2010:2017 & country == "Poland" & team_short_name %in% c('CHO','BIA')) %>%
ggplot(., aes(x = season, y = win_pctg)) +
geom_line(group = 1, aes(color = team_short_name)) +
geom_point(size=2, shape=20, aes(color = team_short_name))
games1 %>%
filter(start %in% 2010:2017 & country == "Poland" & team_short_name %in% c('CHO','BIA')) %>%
ggplot(., aes(x = season, y = win_pctg)) +
geom_line(group = team_short_name, aes(color = team_short_name)) +
geom_point(size=2, shape=20, aes(color = team_short_name))
games1 %>%
filter(start %in% 2010:2017 & country == "Poland" & team_short_name %in% c('CHO','BIA')) %>%
ggplot(., aes(x = season, y = win_pctg)) +
geom_line(aes(group = team_short_name, color = team_short_name)) +
geom_point(size=2, shape=20, aes(color = team_short_name))
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
View(values)
View(player)
View(countries)
unique(q1$country)
q1 %>%
filter(country %in% c('Poland',' Belgium'))
q1 %>%
filter(country %in% c('Poland',' Belgium')) %>%
unique(.$team_short_name)
q1 %>%
filter(.,country %in% c('Poland',' Belgium')) %>%
unique(.$team_short_name)
unique(filter(q1,country %in% c('Poland',' Belgium'))$team_short_name)
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
View(games1)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
